/workspaces/stock-scout-2/unified_backtest.py:165: FutureWarning: Calling float on a single element Series is deprecated and will raise a TypeError in the future. Use float(ser.iloc[0]) instead
  gain_val = float(delta.where(delta > 0, 0.0).tail(14).mean())
/workspaces/stock-scout-2/unified_backtest.py:166: FutureWarning: Calling float on a single element Series is deprecated and will raise a TypeError in the future. Use float(ser.iloc[0]) instead
  loss_val = float(-delta.where(delta < 0, 0.0).tail(14).mean())
⚠ Model file not found: /workspaces/stock-scout-2/model_xgboost_5d_calibrated.pkl

======================================================================
STOCK SCOUT UNIFIED BACKTEST
======================================================================
Date Range: 2024-05-01 to 2024-11-01
Universe Limit: 50
Forward Horizons: [5, 10, 20]
======================================================================

Building stock universe...
⚠ Could not fetch S&P 500 list: HTTP Error 403: Forbidden
✓ Universe: 10 stocks

Downloading benchmark (SPY)...
Computing market context features...
[1/10] Processing AAPL... Traceback (most recent call last):
  File "/workspaces/stock-scout-2/unified_backtest.py", line 403, in <module>
    main()
  File "/workspaces/stock-scout-2/unified_backtest.py", line 366, in main
    signals_df = run_backtest(
                 ^^^^^^^^^^^^^
  File "/workspaces/stock-scout-2/unified_backtest.py", line 171, in run_backtest
    'market_trend': 1.0 if current_spy > sma20 > sma50 else 0.0,
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vscode/.local/lib/python3.11/site-packages/pandas/core/generic.py", line 1580, in __nonzero__
    raise ValueError(
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
